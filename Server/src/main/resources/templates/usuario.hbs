<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="Gesoc, es un Saas de gestion comercial. En Gesoc puedes gestionar y controlar tus operacion y proyectos.">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/styles.css">
    <title>Usuario</title>

    <link rel="shortcut icon" href="/img/gsicon.png"/>

</head>

<body>
<div id="loader">
    <div class="loader"></div>
</div>
<header class="contenedor-barra d-flex jc-sb">
    <!--Menu Hamb -->
    <button id="btn-menu"><i class="fas fa-bars"></i></button>
    <nav id="navbar" class="navbar">
        <ul class="d-flex f-dir-col contenido-navbar">
            <div class="d-flex jc-sb ">
                <h2 class="txt-centrado">Menu</h2>
                <button id="btn-close" class="btn-primario"><i class="fas fa-times"></i></button>
            </div>
            <li><a href="egreso"><i class="fas fa-file-invoice"></i>Nuevo Egreso</a></li>
            <li><a href="ingreso"><i class="fas fa-file-invoice-dollar"></i>Nuevo Ingreso</a></li>
            <li><a href="presupuesto"><i class="fas fa-comments-dollar"></i>Nuevo Presupuesto</a></li>
            <li><a href="mensajes"><i class="fas fa-clipboard-check"></i>Resultado de Validaciones</a></li>
            <li><a href="busquedaOperacion"><i class="fas fa-file-import"></i>Buscar Operación</a></li>
            <li><a href="vinculacion"><i class="fas fa-link"></i>Vincular Operaciones</a></li>
            <li><a href="logout" id="logoutButton"><i class="fas fa-sign-out-alt"></i>Cerrar Sesión</a></li>
        </ul>
    </nav>
    <!--Logo -->
    <div class="ai-center txt-centrado">
        <a href="dashboard">
            <h1 id="logo" class="m-0 fw-700">Ge<span>Soc</span></h1>
        </a>
    </div>
</header>
<main class="seccion">
    <h1>Panel personal</h1>
    <!-- Burbuja Usuario-->
    <div class="burbuja  d-flex jc-sb ai-center">
        <div class="d-flex jc-sb">
            <p><i class="fa fa-user-tie"></i></p>
            <h3>Perfil del Usuario</h3>
        </div>
        <p><i class="fas fa-minus"></i></p>
    </div>
    <!-- Burbuja Usuario-->
    <section class="seccion">
        <div class="contenedor-centrada">
            <h3>Detalle del Usuario</h3>
            <div class="d-flex jc-sb">
                <div>
                    <p><span>Nombre:</span> {{usuario.nombre}}</p>
                    <p><span>Apellido:</span> {{usuario.apellido}}</p>
                </div>
                <div>
                    <p><span>Usuario:</span> {{usuario.username}}</p>
                    <p><span>Rol:</span> {{#if rol}}Administrador{{else}}Estandar{{/if}}</p>
                </div>
            </div>
        </div>
    </section>
    <!-- Burbuja Organizacion-->
    <div class="burbuja  d-flex jc-sb ai-center">
        <div class="d-flex jc-sb">
            <p><i class="fa fa-building"></i></p>
            <h3>Sobre la Organización</h3>
        </div>
        <p><i class="fas fa-minus"></i></p>
    </div>
    <!-- Burbuja Organizacion-->
    <section class="seccion">
        <div class="contenedor-centrada">
            <h3>Detalle de la Organización</h3>
            <div class="d-flex jc-sb">
                <div>
                    <p><span>Organizacion:</span> {{organizacion.nombre}}</p>
                    <p><span>Entidad Seleccionada:</span> {{entidadSeleccionada.nombre}}</p>
                </div>
                <div>
                    <p><span>Puedes trabajar en las entidades:</span><br>
                        {{#each empresas}}
                            {{nombre}},
                        {{/each}}
                        {{#each orgSociales}}
                            {{nombre}},
                        {{/each}}
                        {{#each entidadesBase}}
                            {{nombre}},
                        {{/each}}
                    </p>
                </div>
            </div>
            <div>
                <h3>Detalle de la Entidad Seleccionada</h3>
                <div class="d-flex jc-sb">
                <div>
                    <p><span>Tipo entidad:</span>
                        {{#if seleccionadaBase}} Entidad Base{{/if}}
                        {{#if seleccionadaOS}} Organizacion Social {{/if}}
                        {{#if seleccionadaEmpresa}} Empresa {{/if}}</p>
                    {{#unless seleccionadaBase}}
                        <p><span>Razon Social:</span> {{seleccionadaOS.razonSocial}}{{seleccionadaEmpresa.razonSocial}}
                        </p>
                        <p><span>Descripcion:</span>{{entidadSeleccionada.descripcion}}</p>
                        {{#if seleccionadaEmpresa}}
                            <p><span>Sector:</span> {{seleccionadaEmpresa.sector.nombre}}</p>
                            <p><span>Categoria:</span> {{seleccionadaEmpresa.categoria.nombre}}</p>
                        {{/if}}
                        <p><span>Direccion:</span>
                            {{#if seleccionadaOS}}
                                {{seleccionadaOS.direccionPostal.calle}} {{seleccionadaOS.direccionPostal.altura}} {{seleccionadaOS.direccionPostal.piso}} {{seleccionadaOS.direccionPostal.dpto}}
                                ,{{seleccionadaOS.direccionPostal.ciudad}}, {{seleccionadaOS.direccionPostal.provincia}}
                                , {{seleccionadaOS.direccionPostal.pais}}
                            {{/if}}
                            {{#if seleccionadaEmpresa}}
                                {{seleccionadaEmpresa.direccionPostal.calle}} {{seleccionadaEmpresa.direccionPostal.altura}} {{seleccionadaEmpresa.direccionPostal.piso}} {{seleccionadaEmpresa.direccionPostal.dpto}}
                                ,{{seleccionadaEmpresa.direccionPostal.ciudad}}
                                , {{seleccionadaEmpresa.direccionPostal.provincia}}
                                , {{seleccionadaEmpresa.direccionPostal.pais}}
                            {{/if}}
                        </p>
                    </div>
                        <div>
                            <p><span>CUIT:</span> {{seleccionadaOS.cuit}}{{seleccionadaEmpresa.cuit}}</p>
                            {{#if seleccionadaEmpresa}}
                                <p><span>IGJ:</span>{{seleccionadaEmpresa.codIGJ}}</p>
                                <p><span>Actividad:</span> {{seleccionadaEmpresa.actividad}}</p>
                                <p><span>Cantidad de Personal:</span> {{seleccionadaEmpresa.cantPersonal}}</p>
                                <p><span>Promedio de ventas:</span>{{seleccionadaEmpresa.promVentasAnual}}</p>
                            {{/if}}

                        </div>
                    {{/unless}}
                </div>
            </div>
        </div>
    </section>
    <!-- Burbuja Cambios-->
    <div class="burbuja  d-flex jc-sb ai-center">
        <div class="d-flex jc-sb">
            <p><i class="far fa-address-book"></i></p>
            <h3>Configuración del Perfil</h3>
        </div>
        <p><i class="fas fa-minus"></i></p>
    </div>
    <!-- Burbuja Organizacion-->
    <section class="seccion">
        <h3>Actualiza tu Perfil</h3>
        <div class="contenedor-entrada">
            <div class="d-flex jc-sb">
                <div>
                    <!-- Nombre-->
                    <form id="cambiar-nombre">
                        <label for="nombre">Nombre</label>
                        <br>
                        <input type="text" name="nombre" id="nombre" placeholder="Ingrese su nombre..."
                               pattern="[a-zA-Z ]{2,254}"
                               title="Nombre solo debe contener letras."
                               required>
                        <input type="submit" id="btn-nombre" name="btn-nombre" class="btn btn-formulario"
                               value="Cambiar">
                    </form>
                    <br>
                    <!-- Apellido-->
                    <form id="cambiar-apellido">
                        <label for="apellido">Apellido</label>
                        <br>
                        <input type="text" name="apellido" id="apellido" placeholder="Ingrese su apellido..." required
                               title="Apellido solo debe contener letras."
                               pattern="[a-zA-Z ]{2,254}">
                        <input type="submit" id="btn-apellido" name="btn-apellido" class="btn btn-formulario"
                               value="Cambiar">
                        <br>
                    </form>
                    <!-- Password-->
                    <form id="cambiar-password">
                        <label for="password">Contraseña</label>
                        <br>
                        <input type="password" name="password" id="password" placeholder="Ingrese nueva contraseña..."
                               title="Su contraseña debe entre 8 a 32 caracteres."
                               required
                               minlength="8" maxlength="32">


                        <input type="submit" id="btn-password" name="btn-password" class="btn btn-formulario"
                               value="Cambiar">
                    </form>
                </div>
            </div>
        </div>
    </section>
    <!-- Seccion ADMIN -->
    {{#if rol}}
        <div class="burbuja  d-flex jc-sb ai-center">
            <div class="d-flex jc-sb">
                <p><i class="fas fa-briefcase"></i></p>
                <h3>Configuracion de la Organización</h3>
            </div>
            <p><i class="fas fa-minus"></i></p>
        </div>
        <!-- Organizacion-->

        <section class="seccion">
            <div class="contenedor-centrada">
                <h3>Actualizar Organizacion</h3>
                <div class="d-flex jc-sb">
                    <div class="contenedor-entrada">
                        <!-- Organizacion-->
                        <form id="cambiar-nombre-organizacion">
                            <label for="nombre-organizacion">Nombre Organizacion</label>
                            <br>
                            <input type="text" name="nombre-organizacion" id="nombre-organizacion"
                                   placeholder="Ingrese nombre de la organizacion...">
                            <input type="submit" id="btn-nombre-organizacion" name="btn-nombre-organizacion"
                                   class="btn btn-formulario"
                                   value="Cambiar">
                        </form>
                    </div>
                </div>
                <hr>
                <h3>Actualizar Entidades</h3>
                <div>
                    <div class="contenedor-entrada">
                        <!-- Entidad-->
                        <form id="cambiar-entidad-organizacion">
                            <label for="seleccion-entidad-organizacion">Entidad</label>
                            <br>
                            <select id="seleccion-entidad-organizacion" name="seleccion-entidad-organizacion">
                                <option value="" disabled selected>-- Seleccione --</option>
                                <optgroup label="Empresas">
                                    {{#each empresas}}
                                        <option value={{id}}>{{nombre}}</option>
                                    {{/each}}
                                </optgroup>
                                <optgroup label="Organizaciones Sociales">
                                    {{#each orgSociales}}
                                        <option value={{id}}>{{nombre}}</option>
                                    {{/each}}
                                </optgroup>
                                <optgroup label="Entidades Base">
                                    {{#each entidadesBase}}
                                        <option value={{id}}>{{nombre}}</option>
                                    {{/each}}
                                </optgroup>
                            </select>
                            <a href="/entidad" id="btn-nuevo-entidad" class="btn btn-formulario">Nuevo</a>
                            <br>
                            <div class="d-flex">
                                <input type="button" id="btn-borrar-entidad" name="btn-borrar-entidad"
                                       class="btn btn-formulario-danger"
                                       value="Borrar" hidden>
                                <input type="submit" id="btn-editar-entidad" name="btn-editar-entidad"
                                       class="btn btn-formulario"
                                       value="Editar" hidden>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <!-- Burbuja Criterio -->
        <div class="burbuja  d-flex jc-sb ai-center">
            <div class="d-flex jc-sb">
                <p><i class="fas fa-tags"></i></p>
                <h3>Gestion de Criterios/Categorias</h3>
            </div>
            <p><i class="fas fa-minus"></i></p>
        </div>
        <!-- Criterios/Categorias -->
        <section class="seccion">
            <div class="contenedor-centrada">
                <h3>Configuración Criterios</h3>
                <!-- Criterios -->
                <div class="d-flex jc-sb">
                    <div class="contenedor-entrada">
                        <form id="cambiar-criterios">
                            <label for="criterios">Criterios de la entidad</label>
                            <br>
                            <select name="criterios" id="criterios">
                                <option value="" disabled selected>-- Seleccione --</option>
                                <option value="-1">Nuevo en raiz</option>
                                {{#each criterios}}
                                    <option value="{{id}}">{{nombre}}</option>
                                {{/each}}
                            </select>
                            <input type="submit" id="btn-editar-criterios" name="btn-editar-criterios"
                                   class="btn btn-formulario"
                                   value="Cambiar nombre" hidden>
                            <br>
                            <label for="nuevo-criterio">Criterio</label>
                            <br>
                            <p><em>Si seleccionas Nuevo, se agregara como hijo del criterio seleccionado en Criterio de
                                la entidad</em></p>
                            <br>
                            <input type="text" name="nuevo-criterio" id="nuevo-criterio" minlength="1"
                                   title="Ingrese nombre criterio" placeholder="Ingrese nombre criterio..."
                            >
                            <input type="button" id="btn-nuevo-criterios" name="btn-nuevo-criterios"
                                   class="btn btn-formulario"
                                   value="Nuevo criterio">
                        </form>

                    </div>
                </div>
                <hr>
                <!-- Categorias -->
                <div class="d-flex jc-sb">
                    <div class="contenedor-entrada">
                        <form id="cambiar-categorias">
                            <label for="categorias">Categoria</label>
                            <br>
                            <select name="categorias" id="categorias">
                                <option value="" disabled selected>-- Seleccione --</option>
                                <option value="-1">Nueva categoria</option>
                            </select>
                            <input type="submit" id="btn-editar-categorias" name="btn-editar-categorias"
                                   class="btn btn-formulario"
                                   value="Editar" hidden>
                            <br>
                            <p><em>Si seleccionas Nuevo, se agregara criterio seleccionado en Criterio de la
                                entidad</em></p>
                            <br>
                            <label for="nueva-categoria">Nueva categoria</label>
                            <br>
                            <input type="text" name="nueva-categoria" id="nueva-categoria" minlength="1"
                                   title="Ingrese nombre categoria" placeholder="Ingrese nombre categoria...">
                            <input type="button" id="btn-nuevo-categoria" name="btn-nuevo-categoria"
                                   class="btn btn-formulario"
                                   value="Nueva categoria">
                        </form>

                    </div>
                </div>
            </div>
        </section>
    {{/if}}
</main>

{{#if rol}}
    <script type="module" src="js/gestion/organizacion.js" defer></script>
    <script type="module" src="js/gestion/criterioCategoria.js" defer></script>
{{/if}}

<script type="module" src="js/usuario.js" defer></script>
<script type="module" src="js/generales.js" defer></script>
<script type="module" src="js/loader.js" defer></script>

</body>

</html>